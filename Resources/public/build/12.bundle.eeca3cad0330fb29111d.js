(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"./Resources/public/js/components/c4g-overviewmap.jsx":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=h(t("./node_modules/babel-runtime/helpers/toConsumableArray.js")),o=h(t("./node_modules/babel-runtime/core-js/object/get-prototype-of.js")),n=h(t("./node_modules/babel-runtime/helpers/classCallCheck.js")),l=h(t("./node_modules/babel-runtime/helpers/createClass.js")),r=h(t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),i=h(t("./node_modules/babel-runtime/helpers/inherits.js")),c=t("./node_modules/react/index.js"),p=h(c),u=t("./node_modules/ol/control.js"),d=t("./Resources/public/js/c4g-maps-constant.js"),m=t("./Resources/public/js/c4g-maps-i18n.js"),v=h(t("./node_modules/ol/layer/Group.js")),C=t("./Resources/public/js/components/c4g-titlebar.jsx");function h(e){return e&&e.__esModule?e:{default:e}}
/*
 * This file is part of con4gis,
 * the gis-kit for Contao CMS.
 *
 * @package   	con4gis
 * @version        6
 * @author  	    con4gis contributors (see "authors.txt")
 * @license 	    LGPL-3.0-or-later
 * @copyright 	KÃ¼stenschmiede GmbH Software & Design
 * @link              https://www.con4gis.org
 *
 */var y=function(e){function s(e){(0,n.default)(this,s);var t=(0,r.default)(this,(s.__proto__||(0,o.default)(s)).call(this,e)),a=void 0,l=void 0,i=void 0,c=t;t.state={open:!e.collapsed,layers:t.props.layers},t.langConstants=(0,m.getLanguage)(e.mapController.data),t.mapController=e.mapController,t.open=t.open.bind(t),t.close=t.close.bind(t),(a=document.createElement("div")).className=d.cssConstants.OVERVIEWMAP+" "+d.cssConstants.OL_UNSELECTABLE+" "+d.cssConstants.OL_CONTROL,e.collapsed?a.className+=" "+d.cssConstants.CLOSE:a.className+=" "+d.cssConstants.OPEN,(l=document.createElement("button")).title=t.langConstants.CTRL_OVERVIEWMAP,a.appendChild(l),(i=document.createElement("span")).className=d.cssConstants.ICON,l.appendChild(i),jQuery(l).click((function(){c.state.open?c.close():c.open()})),t.element=a;var p=new u.Control({element:a,target:e.target});return t.baseLayerIds=[],t.mapController.mapsControls.controls.overviewMap=p,t.mapController.map.addControl(p),t}return(0,i.default)(s,e),(0,l.default)(s,[{key:"render",value:function(){return p.default.createElement("div",{className:"overview-map-wrapper"},p.default.createElement(C.Titlebar,{wrapperClass:"c4g-overwiev-header",headerClass:"c4g-overview-headline",header:this.langConstants.OVERVIEWMAP,closeBtnClass:"c4g-titlebar-close",closeBtnCb:this.close,closeBtnTitle:this.langConstants.CLOSE}),p.default.createElement("div",{id:"overview-map-target",className:"c4g-overview-content"}))}},{key:"componentDidMount",value:function(){}},{key:"createOverviewMap",value:function(){var e=document.querySelector("#overview-map-target");this.ovm=new u.OverviewMap({collapsed:this.props.collapsed||!0,collapsible:!1,rotateWithView:!0,className:"ol-overviewmap ol-custom-overviewmap",target:e,layers:this.state.layers}),this.ovm.setMap(this.props.mapController.map)}},{key:"removeFromMap",value:function(){this.element.parentNode.removeChild(this.element)}},{key:"getOverviewMap",value:function(){return this.ovm}},{key:"isOpen",value:function(){return!!jQuery(this.element).hasClass(d.cssConstants.OPEN)}},{key:"open",value:function(){this.setState({open:!0}),this.props.mapController.setOpenComponent(this)}},{key:"close",value:function(){this.setState({open:!1})}},{key:"componentDidUpdate",value:function(e,s,t){if(!this.state.open&&s.open?(jQuery(this.element).addClass(d.cssConstants.CLOSE).removeClass(d.cssConstants.OPEN),jQuery(this.props.ovmTarget).addClass(d.cssConstants.CLOSE).removeClass(d.cssConstants.OPEN)):this.state.open&&(jQuery(this.element).removeClass(d.cssConstants.CLOSE).addClass(d.cssConstants.OPEN),jQuery(this.props.ovmTarget).removeClass(d.cssConstants.CLOSE).addClass(d.cssConstants.OPEN)),s.layers.length!==this.state.layers.length)if(this.ovm){var a=new v.default({layers:this.state.layers});this.ovm.getOverviewMap().setLayerGroup(a)}else this.createOverviewMap()}},{key:"addLayer",value:function(e,s){if(!this.baseLayerIds.includes(s)){this.baseLayerIds.push(s);var t=[].concat((0,a.default)(this.state.layers));t.push(e),this.setState({layers:t})}}}]),s}(c.Component);s.default=y}}]);