(self.webpackChunkmapsbundle=self.webpackChunkmapsbundle||[]).push([["Resources_public_js_components_c4g-router-popup-buttons_jsx"],{"./Resources/public/js/components/c4g-autocomplete-input.jsx":(e,r,o)=>{"use strict";var t=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),s=o("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(r,"__esModule",{value:!0}),r.AutocompleteInput=void 0;var n=t(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=t(o("./node_modules/@babel/runtime/helpers/createClass.js")),p=t(o("./node_modules/@babel/runtime/helpers/inherits.js")),u=t(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=t(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=function(e,r){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var o=l(r);if(o&&o.has(e))return o.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var p=n?Object.getOwnPropertyDescriptor(e,a):null;p&&(p.get||p.set)?Object.defineProperty(t,a,p):t[a]=e[a]}return t.default=e,o&&o.set(e,t),t}(o("./node_modules/react/index.js"));function l(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,o=new WeakMap;return(l=function(e){return e?o:r})(e)}var d=function(e){(0,p.default)(s,e);var r,o,t=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,i.default)(r);if(o){var s=(0,i.default)(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return(0,u.default)(this,e)});function s(e){var r;return(0,n.default)(this,s),(r=t.call(this,e)).listenerRegistered=!1,r}return(0,a.default)(s,[{key:"render",value:function(){var e=this;return c.default.createElement("input",{id:this.props.cssId,type:"search",defaultValue:this.props.value,onKeyDown:function(r,o){13===r.keyCode?function(){var r,o=$("#"+e.props.cssId);o.trigger("change"),r=-1!==e.props.cssId.indexOf("area")?function(){e.props.router.performArea()}:function(){e.props.router.performViaRoute()};var t=-1!==e.props.cssId.indexOf("From")?"fromValue":"toValue";e.props.router.performSearch(o,t,r)}():0!==$(r.currentTarget).val().length||r.keyCode?(e.counter=Math.floor(Date.now()),setTimeout((function(){if(e.counter&&e.counter+400<Math.floor(Date.now()))if(delete e.counter,e.props.objSettings.proxyUrl&&e.props.objSettings.keyAutocomplete)e.autocompleteAddress($("#"+e.props.cssId).val(),"#"+e.props.cssId);else{var r=-1!==e.props.cssId.indexOf("From")?"fromValue":"toValue",o=$("#"+e.props.cssId);e.props.router.performSearch(o,r)}}),500)):"function"==typeof e.props.objFunctions.deleteFunction?e.props.objFunctions.deleteFunction(r.currentTarget,r.currentTarget.id):e.props.objFunctions[e.props.index].deleteFunction(r.currentTarget,r.currentTarget.id)},autoComplete:"off"})}},{key:"componentDidUpdate",value:function(){var e,r=this;-1!==this.props.cssId.indexOf("From")?e=this.props.containerAddresses.arrFromNames:-1!==this.props.cssId.indexOf("To")?e=this.props.containerAddresses.arrToNames:-1!==this.props.cssId.indexOf("Over")?e=this.props.containerAddresses.arrOverNames[this.props.index]:-1!==this.props.cssId.indexOf("area")&&(e=this.props.containerAddresses.arrAreaNames);var o=jQuery("#"+this.props.cssId);o&&"function"==typeof o.autocomplete&&o.autocomplete({source:e}),this.listenerRegistered||(o.on("autocompleteselect",(function(e,o){r.props.index?r.props.objFunctions[r.props.index].selectListener(e,o):r.props.objFunctions.selectListener(e,o)})),this.listenerRegistered=!0)}},{key:"setCenter",value:function(e){this.objSettings.center=e}},{key:"autocompleteAddress",value:function(e,r){var o,t,s=this,n=s.props.objSettings;if(n.center)if("function"==typeof n.center){var a=n.center();o=a[0]+","+a[1]}else o=n.center[0]+","+n.center[1];else n.bBox&&(o=(parseFloat(n.bBox[0])+parseFloat(n.bBox[2]))/2+","+(parseFloat(n.bBox[1])+parseFloat(n.bBox[3]))/2);if(t=o?n.proxyUrl+"autocomplete.php?format=json&key="+n.keyAutocomplete+"&q="+e+"&center="+o:n.proxyUrl+"autocomplete.php?format=json&key="+n.keyAutocomplete+"&q="+e,n.geosearchParams)for(var p in n.geosearchParams)n.geosearchParams.hasOwnProperty(p)&&(t+="&"+p+"="+n.geosearchParams[p]);$.ajax({url:t}).done((function(e){var o;if(n.center?o=n.center:n.bBox&&(o=[(parseFloat(n.bBox[0])+parseFloat(n.bBox[2]))/2,(parseFloat(n.bBox[1])+parseFloat(n.bBox[3]))/2]),e.length>0){if(e[0]&&e[0].display_name&&o){var t=[];for(var a in e)if(e.hasOwnProperty(a)&&n.bBox&&n.bBox[0]&&s.isInBoundingBox(e[a].lon,e[a].lat,n.bBox)){var p={dist:Math.sqrt((o[0]-e[a].lon)*(o[0]-e[a].lon)+(o[1]-e[a].lat)*(o[1]-e[a].lat)),pos:[e[a].lat,e[a].lon],name:e[a].display_name};t.push(p)}for(var u in t.sort((function(e,r){return e.dist-r.dist})),t)t.hasOwnProperty(u)&&(-1!==r.indexOf("from")?s.props.containerAddresses.arrFromNames.includes(t[u].name)||(s.props.containerAddresses.arrFromNames.push(t[u].name),s.props.containerAddresses.arrFromPositions.push(t[u].pos)):-1!==r.indexOf("to")?s.props.containerAddresses.arrToNames.includes(t[u].name)||(s.props.containerAddresses.arrToNames.push(t[u].name),s.props.containerAddresses.arrToPositions.push(t[u].pos)):-1!==r.indexOf("over")?s.props.containerAddresses.arrOverNames[s.props.index].includes(t[u].name)||(s.props.containerAddresses.arrOverNames[s.props.index].push(t[u].name),s.props.containerAddresses.arrOverPositions[s.props.index].push(t[u].pos)):-1!==r.indexOf("area")?s.props.containerAddresses.arrAreaNames.includes(t[u].name)||(s.props.containerAddresses.arrAreaNames.push(t[u].name),s.props.containerAddresses.arrAreaPositions.push(t[u].pos)):console.log("This is weird ¯\\_(ツ)_/¯"));var i=jQuery.Event("keydown",{keyCode:8});$(r).trigger(i)}for(var c in e)e.hasOwnProperty(c)&&(-1!==r.indexOf("From")?s.props.containerAddresses.arrFromNames.includes(e[c].display_name)||(s.props.containerAddresses.arrFromNames.push(e[c].display_name),s.props.containerAddresses.arrFromPositions.push([e[c].lat,e[c].lon])):-1!==r.indexOf("To")?s.props.containerAddresses.arrToNames.includes(e[c].display_name)||(s.props.containerAddresses.arrToNames.push(e[c].display_name),s.props.containerAddresses.arrToPositions.push([e[c].lat,e[c].lon])):-1!==r.indexOf("Over")?s.props.containerAddresses.arrOverNames[s.props.index].includes(e[c].display_name)||(s.props.containerAddresses.arrOverNames[s.props.index].push(e[c].display_name),s.props.containerAddresses.arrOverPositions[s.props.index].push([e[c].lat,e[c].lon])):-1!==r.indexOf("area")?s.props.containerAddresses.arrAreaNames.includes(e[c].display_name)||(s.props.containerAddresses.arrAreaNames.push(e[c].display_name),s.props.containerAddresses.arrAreaPositions.push([e[c].lat,e[c].lon])):console.log("This is weird ¯\\_(ツ)_/¯"));s.props.router.setState({containerAddresses:s.props.containerAddresses});var l=jQuery.Event("keydown",{keyCode:8});$(r).trigger(l)}}))}},{key:"isInBoundingBox",value:function(e,r,o){return"string"==typeof e&&(e=parseFloat(e)),"string"==typeof r&&(r=parseFloat(r)),o[0]<e&&e<o[2]&&o[1]<r&&r<o[3]}}]),s}(c.Component);r.AutocompleteInput=d},"./Resources/public/js/components/c4g-router-popup-buttons.jsx":(e,r,o)=>{"use strict";var t=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),s=o("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(r,"__esModule",{value:!0}),r.RouterPopupButtons=void 0;var n=t(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=t(o("./node_modules/@babel/runtime/helpers/createClass.js")),p=t(o("./node_modules/@babel/runtime/helpers/inherits.js")),u=t(o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=t(o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=function(e,r){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var o=d(r);if(o&&o.has(e))return o.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var p=n?Object.getOwnPropertyDescriptor(e,a):null;p&&(p.get||p.set)?Object.defineProperty(t,a,p):t[a]=e[a]}return t.default=e,o&&o.set(e,t),t}(o("./node_modules/react/index.js")),l=(o("./Resources/public/js/components/c4g-autocomplete-input.jsx"),o("./node_modules/ol/geom.js"),o("./Resources/public/js/routing-constant-i18n.js"),o("./node_modules/ol/proj.js"));function d(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,o=new WeakMap;return(d=function(e){return e?o:r})(e)}var f=function(e){(0,p.default)(s,e);var r,o,t=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,i.default)(r);if(o){var s=(0,i.default)(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return(0,u.default)(this,e)});function s(e){return(0,n.default)(this,s),t.call(this,e)}return(0,a.default)(s,[{key:"render",value:function(){var e=this;return c.default.createElement("div",null,c.default.createElement("button",{className:"c4g-icon c4g-popup-route-from",title:this.props.config.router.languageConstants.POPUP_ROUTE_FROM,onMouseUp:function(){!function(){e.props.config.router.openControls(!0),e.props.config.router.setMode("route");var r=(0,l.toLonLat)(e.props.config.feature.getGeometry().getCoordinates(),"EPSG:3857");e.props.config.router.setRouteFrom(r[0],r[1])}()}}),c.default.createElement("button",{className:"c4g-icon c4g-popup-route-to",title:this.props.config.router.languageConstants.POPUP_ROUTE_TO,onMouseUp:function(){!function(){e.props.config.router.openControls(!0),e.props.config.router.setMode("route");var r=(0,l.toLonLat)(e.props.config.feature.getGeometry().getCoordinates(),"EPSG:3857");e.props.config.router.setRouteTo(r[0],r[1])}()}}))}}]),s}(c.Component);r.RouterPopupButtons=f}}]);