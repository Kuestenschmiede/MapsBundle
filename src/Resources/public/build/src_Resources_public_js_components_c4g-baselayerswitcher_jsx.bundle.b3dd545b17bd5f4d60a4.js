/*! For license information please see src_Resources_public_js_components_c4g-baselayerswitcher_jsx.bundle.b3dd545b17bd5f4d60a4.js.LICENSE.txt */
"use strict";(self.webpackChunkmapsbundle=self.webpackChunkmapsbundle||[]).push([["src_Resources_public_js_components_c4g-baselayerswitcher_jsx"],{"./src/Resources/public/js/components/c4g-baselayerswitcher.jsx":(e,t,r)=>{var a=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=r("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),s=a(r("./node_modules/@babel/runtime/helpers/createClass.js")),o=a(r("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=a(r("./node_modules/@babel/runtime/helpers/inherits.js")),u=a(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=a(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}return a.default=e,r&&r.set(e,a),a}(r("./node_modules/react/index.js")),d=r("./node_modules/ol/control.js"),f=r("./src/Resources/public/js/c4g-maps-i18n.js"),y=r("./src/Resources/public/js/components/c4g-overlay-controls.jsx"),m=r("./src/Resources/public/js/c4g-maps-utils.js");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var b=p.default.lazy((function(){return Promise.resolve().then(r.bind(r,"./src/Resources/public/js/components/c4g-titlebar.jsx"))}));t.default=function(e){(0,c.default)(l,e);var t,r,a=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,i.default)(t);if(r){var l=(0,i.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,u.default)(this,e)});function l(e){var t;(0,n.default)(this,l),t=a.call(this,e);var r=(0,o.default)(t),s=document.createElement("div"),c=document.createElement("button");t.langConstants=(0,f.getLanguage)(e.mapController.data);var u=document.createElement("span");u.innerText=t.langConstants.CTRL_BASELAYER,c.appendChild(u),s.className="c4g-baselayer-control ol-unselectable ol-control ",e.open?s.className+="c4g-open":s.className+="c4g-close",e.external&&(s.className+=" c4g-external"),s.appendChild(c),jQuery(s).on("click",(function(e){r.state.open?r.close():r.open()}));var i=e.mapController,p=new d.Control({element:s,target:e.target}),y=i.arrComponents.findIndex((function(e){return"baselayerswitcher"===e.name}));i.arrComponents[y].control=p,i.mapsControls.controls.baselayerSwitcher=p,t.open=t.open.bind((0,o.default)(t)),t.close=t.close.bind((0,o.default)(t));var m=!1;return e.mapController.proxy.baselayerLoaded?m=!0:(e.mapController.proxy.hook_baselayer_loaded=e.mapController.proxy.hook_baselayer_loaded||[],e.mapController.proxy.hook_baselayer_loaded.push((function(){r.setState({baselayerLoaded:!0,currentBaselayer:e.mapController.state.activeBaselayerId})}))),t.state={open:e.open||!1,className:e.className||"c4g-baselayerswitcher-panel",control:p,baselayerLoaded:m,currentBaselayer:0,baselayerFilter:""},t}return(0,s.default)(l,[{key:"componentDidMount",value:function(){}},{key:"getFilteredBaselayerIds",value:function(){var e=this.props.baselayerController.arrBaselayers,t=this.props.baselayerController.baselayerIds,r=[];if(""===this.state.baselayerFilter)r=t;else for(var a=0;a<t.length;a++){var l=e[t[a]];if(-1!==l.name.toLowerCase().indexOf(this.state.baselayerFilter.toLowerCase()))r.push(t[a]);else{var n=l.overlayController.arrOverlays,s=Object.keys(n);if(s.length>0)for(var o=0;o<s.length;o++)if(-1!==n[s[o]].name.toLowerCase().indexOf(this.state.baselayerFilter.toLowerCase())){r.push(t[a]);break}}}return r}},{key:"render",value:function(){var e=this,t=this.props.baselayerController.arrBaselayers,r=this.getFilteredBaselayerIds(),a="";this.props.mapController.data.baselayerswitcher.filter&&(a=p.default.createElement("div",{className:"c4g-baselayer-filter without-button"},p.default.createElement("input",{className:"c4g-baselayer-filter-field",type:"text",placeholder:"ï€‚",onInput:function(){e.filterBaselayers(e.value)}}))),this.state.open?(jQuery(this.state.control.element).addClass("c4g-open").removeClass("c4g-close"),jQuery(".c4g-baselayer-container").addClass("c4g-open").removeClass("c4g-close")):(jQuery(this.state.control.element).removeClass("c4g-open").addClass("c4g-close"),jQuery(".c4g-baselayer-container").removeClass("c4g-open").addClass("c4g-close"));var l=this,n=this.props.mapController.data.baselayerswitcher.label?this.props.mapController.data.baselayerswitcher.label:"Basiskarten";return p.default.createElement("div",{className:"c4g-baselayer-wrapper"},p.default.createElement(p.Suspense,{fallback:p.default.createElement("div",null,"Loading...")},p.default.createElement(b,{wrapperClass:"c4g-baselayer-header",headerClass:"c4g-baselayer-headline",header:n,closeBtnClass:"c4g-baselayer-close",closeBtnCb:this.close,closeBtnTitle:this.langConstants.CLOSE})),a,p.default.createElement("div",{className:"c4g-baselayertree-content"},p.default.createElement("ul",null,r.map((function(e,r){var a=t[e],n=l.state.currentBaselayer===e?"c4g-active":"c4g-inactive",s="";a.preview_image&&(s=p.default.createElement("img",{className:"c4g-baselayer-preview",src:a.preview_image,alt:""}));var o="";a.overlayController.arrOverlays.length>0&&l.state.currentBaselayer===e&&(o=p.default.createElement(y.OverlayControls,{overlayController:a.overlayController}));var c=a.name;return s&&(c=p.default.createElement("span",null,a.name)),p.default.createElement("li",{key:r,className:s?"with-image":"without-image"},p.default.createElement("a",{onMouseUp:function(t){t.preventDefault(),t.stopPropagation(),l.entryClick(e)},className:n},c,s),o)})))))}},{key:"filterBaselayers",value:function(e){var t=jQuery(".c4g-baselayer-filter-field").val();this.setState({baselayerFilter:t})}},{key:"entryClick",value:function(e){this.props.baselayerController.showBaseLayer(e),this.props.changeActiveLayers(e),this.setState({currentBaselayer:e})}},{key:"open",value:function(){this.setState({open:!0}),this.props.mapController.setOpenComponent(this)}},{key:"close",value:function(){this.setState({open:!1})}},{key:"componentDidUpdate",value:function(e,t,r){if(this.props.mapController.data.caching){var a=m.utils.getValue("panel");"BaselayerSwitcher"!==a||this.state.open?"BaselayerSwitcher"!==a&&this.state.open&&m.utils.storeValue("panel","BaselayerSwitcher"):m.utils.storeValue("panel","")}}}]),l}(p.Component)},"./src/Resources/public/js/components/c4g-overlay-controls.jsx":(e,t,r)=>{var a=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=r("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayControls=void 0;var n=a(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),s=a(r("./node_modules/@babel/runtime/helpers/createClass.js")),o=a(r("./node_modules/@babel/runtime/helpers/inherits.js")),c=a(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=a(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}return a.default=e,r&&r.set(e,a),a}(r("./node_modules/react/index.js"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}t.OverlayControls=function(e){(0,o.default)(l,e);var t,r,a=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.default)(t);if(r){var l=(0,u.default)(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return(0,c.default)(this,e)});function l(e){return(0,n.default)(this,l),a.call(this,e)}return(0,s.default)(l,[{key:"render",value:function(){var e=this,t=this.props.overlayController.arrOverlays;return i.default.createElement("ul",{className:"c4g-overlays"},t.map((function(t,r){return i.default.createElement("li",{key:r},i.default.createElement("a",null,i.default.createElement("span",null,t.name),i.default.createElement("input",{id:"c4g-overlay-toggle_"+r,className:"c4g-overlay-toggle",type:"range",onInput:function(){return t=r,a=jQuery("#c4g-overlay-toggle_"+t).val(),void e.props.overlayController.arrOverlays[t].changeOpacity(a);var t,a},min:0,max:100,step:10,defaultValue:t.opacity})))})))}}]),l}(i.Component)}}]);