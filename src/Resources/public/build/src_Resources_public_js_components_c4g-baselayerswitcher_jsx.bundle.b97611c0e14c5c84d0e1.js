/*! For license information please see src_Resources_public_js_components_c4g-baselayerswitcher_jsx.bundle.b97611c0e14c5c84d0e1.js.LICENSE.txt */
"use strict";(self.webpackChunkmapsbundle=self.webpackChunkmapsbundle||[]).push([["src_Resources_public_js_components_c4g-baselayerswitcher_jsx"],{"./src/Resources/public/js/components/c4g-baselayerswitcher.jsx"(e,t,a){var r=a("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=a("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=r(a("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(a("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(a("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(a("./node_modules/@babel/runtime/helpers/inherits.js")),i=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var a,r,s={__proto__:null,default:e};if(null===e||"object"!=l(e)&&"function"!=typeof e)return s;if(a=t){if(a.has(e))return a.get(e);a.set(e,s)}for(var n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&((r=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,n))&&(r.get||r.set)?a(s,n,r):s[n]=e[n]);return s}(e)}(a("./node_modules/react/index.js")),p=a("./node_modules/ol/control.js"),d=a("./src/Resources/public/js/c4g-maps-i18n.js"),f=a("./src/Resources/public/js/components/c4g-overlay-controls.jsx"),m=a("./src/Resources/public/js/c4g-maps-utils.js");function y(e,t,a){return t=(0,c.default)(t),(0,o.default)(e,b()?Reflect.construct(t,a||[],(0,c.default)(e).constructor):t.apply(e,a))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}var h=i.default.lazy(function(){return Promise.resolve().then(a.bind(a,"./src/Resources/public/js/components/c4g-titlebar.jsx"))});t.default=function(e){function t(e){var a;(0,s.default)(this,t);var r=a=y(this,t,[e]),l=document.createElement("div"),n=document.createElement("button");if(a.langConstants=(0,d.getLanguage)(e.mapController.data),e.mapController.data.themeData&&e.mapController.data.themeData.controlLabels){var o=document.createElement("span");o.innerText=a.langConstants.CTRL_BASELAYER,n.appendChild(o)}else n.title=a.langConstants.CTRL_BASELAYER;l.className="c4g-baselayer-control ol-unselectable ol-control ",e.open?l.className+="c4g-open":l.className+="c4g-close",e.external&&(l.className+=" c4g-external"),l.appendChild(n),jQuery(l).on("click",function(e){r.state.open?r.close():r.open()});var c=e.mapController,u=new p.Control({element:l,target:e.target}),i=c.arrComponents.findIndex(function(e){return"baselayerswitcher"===e.name});c.arrComponents[i].control=u,c.mapsControls.controls.baselayerSwitcher=u,a.open=a.open.bind(a),a.close=a.close.bind(a);var f=!1;return e.mapController.proxy.baselayerLoaded?f=!0:(e.mapController.proxy.hook_baselayer_loaded=e.mapController.proxy.hook_baselayer_loaded||[],e.mapController.proxy.hook_baselayer_loaded.push(function(){r.setState({baselayerLoaded:!0,currentBaselayer:e.mapController.state.activeBaselayerId})})),a.state={open:e.open||!1,className:e.className||"c4g-baselayerswitcher-panel",control:u,baselayerLoaded:f,currentBaselayer:0,baselayerFilter:""},a}return(0,u.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){}},{key:"getFilteredBaselayerIds",value:function(){var e=this.props.baselayerController.arrBaselayers,t=this.props.baselayerController.baselayerIds,a=[];if(""===this.state.baselayerFilter)a=t;else for(var r=0;r<t.length;r++){var l=e[t[r]];if(-1!==l.name.toLowerCase().indexOf(this.state.baselayerFilter.toLowerCase()))a.push(t[r]);else{var s=l.overlayController.arrOverlays,n=Object.keys(s);if(n.length>0)for(var o=0;o<n.length;o++)if(-1!==s[n[o]].name.toLowerCase().indexOf(this.state.baselayerFilter.toLowerCase())){a.push(t[r]);break}}}return a}},{key:"render",value:function(){var e=this,t=this.props.baselayerController.arrBaselayers,a=this.getFilteredBaselayerIds(),r="";this.props.mapController.data.baselayerswitcher.filter&&(r=i.default.createElement("div",{className:"c4g-baselayer-filter without-button"},i.default.createElement("input",{className:"c4g-baselayer-filter-field",type:"text",placeholder:"ï€‚",onInput:function(){e.filterBaselayers(e.value)}}))),this.state.open?(jQuery(this.state.control.element).addClass("c4g-open").removeClass("c4g-close"),jQuery(".c4g-baselayer-container").addClass("c4g-open").removeClass("c4g-close")):(jQuery(this.state.control.element).removeClass("c4g-open").addClass("c4g-close"),jQuery(".c4g-baselayer-container").removeClass("c4g-open").addClass("c4g-close"));var l=this,s=this.props.mapController.data.baselayerswitcher.label?this.props.mapController.data.baselayerswitcher.label:"Basiskarten";return i.default.createElement("div",{className:"c4g-baselayer-wrapper"},i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(h,{wrapperClass:"c4g-baselayer-header",headerClass:"c4g-baselayer-headline",header:s,closeBtnClass:"c4g-baselayer-close",closeBtnCb:this.close,closeBtnTitle:this.langConstants.CLOSE})),r,i.default.createElement("div",{className:"c4g-baselayertree-content"},i.default.createElement("ul",null,a.map(function(e,a){var r=t[e],s=l.state.currentBaselayer===e?"c4g-active":"c4g-inactive",n="";r.preview_image&&(n=i.default.createElement("img",{className:"c4g-baselayer-preview",src:r.preview_image,alt:""}));var o="";r.overlayController.arrOverlays.length>0&&l.state.currentBaselayer===e&&(o=i.default.createElement(f.OverlayControls,{overlayController:r.overlayController}));var c=r.name;return n&&(c=i.default.createElement("span",null,r.name)),i.default.createElement("li",{key:a,className:n?"with-image":"without-image"},i.default.createElement("a",{onMouseUp:function(t){t.preventDefault(),t.stopPropagation(),l.entryClick(e)},className:s},c,n),o)}))))}},{key:"filterBaselayers",value:function(e){var t=jQuery(".c4g-baselayer-filter-field").val();this.setState({baselayerFilter:t})}},{key:"entryClick",value:function(e){this.props.baselayerController.showBaseLayer(e),this.props.changeActiveLayers(e),this.setState({currentBaselayer:e})}},{key:"open",value:function(){this.setState({open:!0}),this.props.mapController.setOpenComponent(this)}},{key:"close",value:function(){this.setState({open:!1})}},{key:"componentDidUpdate",value:function(e,t,a){if(this.props.mapController.data.caching){var r=m.utils.getValue("panel");"BaselayerSwitcher"!==r||this.state.open?"BaselayerSwitcher"!==r&&this.state.open&&m.utils.storeValue("panel","BaselayerSwitcher"):m.utils.storeValue("panel","")}}}])}(i.Component)},"./src/Resources/public/js/components/c4g-overlay-controls.jsx"(e,t,a){var r=a("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=a("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayControls=void 0;var s=r(a("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=r(a("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(a("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(a("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(a("./node_modules/@babel/runtime/helpers/inherits.js")),i=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var a,r,s={__proto__:null,default:e};if(null===e||"object"!=l(e)&&"function"!=typeof e)return s;if(a=t){if(a.has(e))return a.get(e);a.set(e,s)}for(var n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&((r=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,n))&&(r.get||r.set)?a(s,n,r):s[n]=e[n]);return s}(e)}(a("./node_modules/react/index.js"));function p(e,t,a){return t=(0,c.default)(t),(0,o.default)(e,d()?Reflect.construct(t,a||[],(0,c.default)(e).constructor):t.apply(e,a))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}t.OverlayControls=function(e){function t(e){return(0,s.default)(this,t),p(this,t,[e])}return(0,u.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this,t=this.props.overlayController.arrOverlays;return i.default.createElement("ul",{className:"c4g-overlays"},t.map(function(t,a){return i.default.createElement("li",{key:a},i.default.createElement("a",null,i.default.createElement("span",null,t.name),i.default.createElement("input",{id:"c4g-overlay-toggle_"+a,className:"c4g-overlay-toggle",type:"range",onInput:function(){return t=a,r=jQuery("#c4g-overlay-toggle_"+t).val(),void e.props.overlayController.arrOverlays[t].changeOpacity(r);var t,r},min:0,max:100,step:10,defaultValue:t.opacity})))}))}}])}(i.Component)}}]);